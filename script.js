const servers = [
        {
          id: 1,
          name: 'Design para Web',
          serverImage: 'img/teste1.jpg',
          channels: [
            {
              id: 1,
              name: '# üì± geral',
              messages: [
                {
                  author: 'Sistema',
                  text: 'Bem-vindo ao servidor de An√°lise de Design! Aqui voc√™ encontrar√° uma an√°lise detalhada sobre o redesign de uma rede social.'
                },
                  {
                    author: 'Sistema',
                    text: 'Bem-vindo ao servidor! Confira o c√≥digo em https://github.com/AkuBaxi/compensacao_ausencia/tree/main/designWeb'
                  }                  
              ]
            },
            {
              id: 2,
              name: '# üí™ pontos-fortes',
              messages: [
                {
                  author: 'Sistema',
                  text: 'üìå Navega√ß√£o Intuitiva\n‚Ä¢ Menu principal de f√°cil acesso\n‚Ä¢ √çcones reconhec√≠veis universalmente\n‚Ä¢ Hierarquia clara de informa√ß√µes'
                },
                {
                  author: 'Sistema',
                  text: 'üìå Engajamento do Usu√°rio\n‚Ä¢ Sistema de likes e coment√°rios\n‚Ä¢ Stories para conte√∫do ef√™mero\n‚Ä¢ Feed infinito para maior reten√ß√£o'
                },
                {
                  author: 'Sistema',
                  text: 'üìå Performance\n‚Ä¢ Carregamento r√°pido de imagens\n‚Ä¢ Cache eficiente\n‚Ä¢ Atualiza√ß√µes em tempo real'
                }
              ]
            },
            {
              id: 3,
              name: '# üö´ pontos-fracos',
              messages: [
                {
                  author: 'Sistema',
                  text: 'üìå Sobrecarga Visual\n‚Ä¢ Excesso de informa√ß√µes na tela\n‚Ä¢ Publicidade muito invasiva\n‚Ä¢ Interface √†s vezes confusa em certas se√ß√µes'
                },
                {
                  author: 'Sistema',
                  text: 'üìå Problemas de Acessibilidade\n‚Ä¢ Contraste insuficiente\n‚Ä¢ Textos pequenos\n‚Ä¢ Falta de suporte para leitores de tela'
                },
                {
                  author: 'Sistema',
                  text: 'üìå Limita√ß√µes T√©cnicas\n‚Ä¢ Consumo alto de bateria\n‚Ä¢ Uso excessivo de dados m√≥veis\n‚Ä¢ Performance inconsistente em dispositivos mais antigos'
                }
              ]
            },
            {
              id: 4,
          name: '# üé® style-guide',
          messages: [
            {
              author: ' Sistema de Cores',
              text: 'img:img_design/rootCores.png'
            },
            {
              author: 'Tipografia',
              text: 'img:img_design/rootTipografia.png'
            },
            {
              author: 'Espa√ßamento e Layout',
              text: 'img:img_design/rootLayout.png'
            },
            {
              author: 'Grid System',
              text: 'img:img_design/gridSystem.png'
            },
            {
              author: ' Anima√ß√µes e Transi√ß√µes',
              text: 'img:img_design/rootAnimation.png'
            },
            {
              author: 'Componentes Base',
              text: 'img:img_design/rootBase.png'
            }

          ]
            },
            {
              id: 5,
              name: '# üìà melhorias',
              messages: [
                {
                  author: 'Sistema',
                  text: 'üìå Design\n‚Ä¢ Implementar Dark Mode nativo\n‚Ä¢ Melhorar hierarquia visual\n‚Ä¢ Criar mais espa√ßo em branco\n‚Ä¢ Adicionar micro-intera√ß√µes'
                },
                {
                  author: 'Sistema',
                  text: 'üìå Usabilidade\n‚Ä¢ Simplificar a navega√ß√£o\n‚Ä¢ Melhorar a gest√£o de notifica√ß√µes\n‚Ä¢ Criar atalhos personaliz√°veis\n‚Ä¢ Otimizar para uso com uma m√£o'
                },
                {
                  author: 'Sistema',
                  text: 'üìå Acessibilidade \n ‚Ä¢ Aumentar contraste\n‚Ä¢ Implementar suporte ARIA\n‚Ä¢ Melhorar navega√ß√£o por teclado\n‚Ä¢ Adicionar descri√ß√µes em imagens'
                }
              ]
            },
            {
              id: 6,
              name: '# üë• p√∫blico-alvo',
              messages: [
                {
                  author: 'Sistema',
                  text: 'üìå Demografia Principal\n‚Ä¢ Idade: 18-35 anos\n‚Ä¢ Familiaridade com tecnologia: Alta\n‚Ä¢ Dispositivo principal: Smartphone\n‚Ä¢ Tempo m√©dio de uso: 2-3 horas/dia'
                },
                {
                  author: 'Sistema',
                  text: 'üìå Necessidades do Usu√°rio\n‚Ä¢ Compartilhamento r√°pido de conte√∫do\n‚Ä¢ Intera√ß√£o social cont√≠nua\n‚Ä¢ Descoberta de novo conte√∫do\n‚Ä¢ Personaliza√ß√£o da experi√™ncia'
                }
              ]
            }
          ]
        },
    {
      id: 2,
      name: 'Empreendedorismo Tecnologico',
      serverImage: '../empreendedorismo/imgEmpreendedorismo/logoRPGHub.png',
      channels: [
        {
          id: 1,
              name: '# üì± geral',
              messages: [
                {
                  author: 'Sistema',
                  text: 'Bem-vindo ao servidor de Empreendedorismo Tecnologico! Aqui voc√™ encontrar√° uma cria√ß√£o de uma startup de RPG.'
                },
                  {
                    author: 'Sistema',
                    text: 'Bem-vindo ao servidor! Confira o c√≥digo em https://github.com/AkuBaxi/compensacao_ausencia/tree/main/empreendedorismo'
                  }                  
              ]
        },
        {
          id: 2,
          name: '# üé≤ O que √©?',
          messages: [
            {
              author: 'Sistema',
              text: 'A RPG Hub √© uma plataforma integrada que revoluciona a experi√™ncia de jogadores e mestres de RPG, oferecendo ferramentas intuitivas para cria√ß√£o, organiza√ß√£o e personaliza√ß√£o de campanhas.'
            }
          ]
        },
        {
          id:3,
          name: '# ‚ö† Problema Real e Solu√ß√£o',
         messages:[
          {
            author: 'Sistema',
             text:'Jogadores e mestres de RPG enfrentam dificuldades para organizar campanhas, criar mapas e fichas personalizadas, e conectar grupos de forma eficiente. \n Recursos online existentes s√£o fragmentados ou complexos para iniciantes. \n Falta de integra√ß√£o entre ferramentas existentes aumenta custos e tempo de prepara√ß√£o. \n A experi√™ncia de jogo √© prejudicada por problemas de organiza√ß√£o e comunica√ß√£o.'
          },
          {
            author: 'Sistema',
            text: 'A RPG Hub oferece solu√ß√µes para esses problemas, incluindo: \n ‚Ä¢ Ferramentas de cria√ß√£o de campanhas e mapas personalizados \n‚Ä¢ Integra√ß√£o de recursos online para facilitar a organiza√ß√£o e comunica√ß√£o \n‚Ä¢ Plataforma de gerenciamento de grupos e campanhas \n ‚Ä¢ Ferramentas de personaliza√ß√£o de fichas e recursos de jogo'
            }
         ]
        },
        {
          id: 4,
          name: '# üë• p√∫blico-alvo',
          messages:[
            {
              author:'Sistema',
              text: 'A RPG Hub √© projetada para atender a uma ampla gama de p√∫blicos, incluindo: \n ‚Ä¢ Jogadores de RPG \n ‚Ä¢ Mestres de RPG \n ‚Ä¢ Criadores de conte√∫do \n ‚Ä¢ Organizadores de eventos \n ‚Ä¢ F√£s de RPG \n ‚Ä¢ Jogadores Iniciantes \n ‚Ä¢ Jogadores experientes \n ‚Ä¢ Criadores de RPG'
            }
          ]
          },
          {
            id: 5,
            name: '# üèÜ Proposta de Valor',
            messages: [
              {
                author: 'Sistema',
                text:'Proposta de Valor \n ‚Ä¢ Plataforma all-in-one para RPG, \n ‚Ä¢ Interface intuitiva e moderna, \n ‚Ä¢ Suporte multiplataforma (PC, Mobile, Tablet) \n ‚Ä¢ Integra√ß√£o com sistemas populares \n ‚Ä¢ Recursos de comunidade e social '
                }
              ]
            },
            {
              id: 6,
              name: '# üßæ An√°lise Financeira',
              messages: [
                {
                  author: ' Receitas ',
                  text:'‚Ä¢ Assinaturas Premium (5000 usu√°rios x $7.99 x 12 meses) = $479,400 \n ‚Ä¢ Marketplace (30% comiss√£o sobre $200,000) = $60,000 \n ‚Ä¢ Parcerias e An√∫ncios = $40,000 \n ‚Ä¢ Total Receitas: $579,400'
                  },
                  {
                    author: ' Custos ',
                    text: ' ‚Ä¢ Desenvolvimento e Manuten√ß√£o = $200,000 \n ‚Ä¢ Marketing e Aquisi√ß√£o = $100,000 \n ‚Ä¢ Infraestrutura e Servidores = $50,000 \n  ‚Ä¢ Equipe de Suporte = $80,000\n ‚Ä¢ Custos Administrativos = $40,000 \n ‚Ä¢ Total Custos: $470,000 \n '
                    },
                    {
                      author: 'Lucro',
                      text: 'Lucro Projetado Ano 1: $109,400'
                      }

                ]
              }
      ]
    },
    {
      id: 3,
      name: 'Ci√™ncia de Dados',
      serverImage: 'img/teste1.jpg',
      channels: [
        {
          id: 1,
          name: '# üì± geral',
          messages: [
            {
              author: 'Sistema',
              text: 'Bem-vindo ao servidor de An√°lise de Design! Aqui voc√™ encontrar√° uma an√°lise detalhada sobre o dados coletados do Spotify'
            },
              {
                author: 'Sistema',
                text: 'Bem-vindo ao servidor! Confira o c√≥digo em https://github.com/AkuBaxi/compensacao_ausencia/tree/main/cienciaDados'
              }                  
          ]
        },
        {
          id: 2,
          name: '# üé≤ O que √©?',
          messages: [
            {
              author: '',
              text: 'A ci√™ncia de dados e a coleta de dados existem para transformar informa√ß√µes brutas em insights valiosos.'
            },
            {
              author: '',
              text: ' A coleta de dados permite reunir informa√ß√µes de diversas fontes, enquanto a ci√™ncia de dados analisa, processa e interpreta esses dados usando t√©cnicas estat√≠sticas e computacionais. '
            },
            {
              author: '',
              text: ' O objetivo √© tomar decis√µes mais informadas, prever tend√™ncias, resolver problemas complexos e impulsionar a inova√ß√£o em √°reas como neg√≥cios, sa√∫de, tecnologia e pesquisa cient√≠fica.'
            }
          ]
        },
        {
          id: 2,
          name: '#üßæ Metodologia',
          messages: [
            {
              author: '',
              text: 'O estudo utilizou um dashboard interativo para an√°lise de dados musicais baseados em m√©tricas do Spotify. '
            },
            {
              author: '',
              text: ' A metodologia incluiu a coleta de informa√ß√µes como streams, dan√ßabilidade, g√™nero musical, e artista, com filtros por per√≠odo e categoria. '
            },
            {
              author: '',
              text: ' A visualiza√ß√£o foi feita por gr√°ficos (barras, pizza e linhas) para identificar padr√µes e tend√™ncias.'
            },
            {
              author: 'üìä Gr√°fico de Barras',
              text: 'img:img_dados/barras.png'
            },
            {
              author: 'üçï Gr√°fico de Pizza',
              text: 'img:img_dados/pizza.png'
            },
            {
              author: 'üìà Gr√°fico Linhas e Barras',
              text: 'img:img_dados/linhas_barras.png'
            }
          ]
        },
        
      ]
    },
    {
      id: 4,
      name: '√âtica e Direito Digital',
      serverImage: 'img/teste1.jpg',
      channels: [
        {
          id: 1,
          name: '# üì± geral',
          messages: [
            {
              author: 'Sistema',
              text: 'Bem-vindo ao servidor de √âtica e Direito Digital! Aqui voc√™ encontrar√° uma campanha de conscientiza√ß√£o sobre seguran√ßa digital para adolescentes.'
            },
              {
                author: 'Sistema',
                text: 'Bem-vindo ao servidor! Confira o c√≥digo em https://github.com/AkuBaxi/compensacao_ausencia/tree/main/etica'
              }                  
          ]
        },
        {
          id: 2,
          name: '# ‚ùó Objetivo',
          messages: [
            {
              author: '',
              text: 'Educar sobre riscos digitais'
            },
            {
              author: '',
              text: ' Promover conscientiza√ß√£o sobre privacidade online '
            },
            {
              author: '',
              text: ' Oferecer recursos pr√°ticos de seguran√ßa digital'
            }
          ]
        },
        {
          id: 2,
          name: '#üßæ Recursos e Funcionalidades',
          messages: [
            {
              author: '',
              text: 'Se√ß√£o de Temas Interativos. \n Quiz de Seguran√ßa Digital. \n Links para recursos de apoio'
            },
            {
              author: '',
              text: ' Cards interativos sobre temas digitais. \n Quiz educativo. \n  Design responsivo. \n Cores e estilo modernos.'
            }
          ]
        },
        
      ]
    }
  ];
  
  let currentServerId = 1;
  let currentChannelId = 1;
  
  function loadChannels() {
    const channelList = document.getElementById('channelList');
    channelList.innerHTML = '';
    const currentServer = servers.find(server => server.id === currentServerId);
    document.getElementById('serverName').textContent = currentServer.name;
    document.querySelector('.server-image img').src = currentServer.serverImage;
    currentServer.channels.forEach(channel => {
      const li = document.createElement('li');
      li.textContent = channel.name;
      li.classList.add('channel-item');
      li.dataset.channelId = channel.id;
      li.dataset.channelName = channel.name;
      li.addEventListener('click', () => {
        displayMessages(channel);
      });
      channelList.appendChild(li);
    });
  }
  
  function displayMessages(channel) {
    const messageList = document.getElementById('messageList');
    messageList.innerHTML = '';
    const channelName = document.getElementById('channelName');
    channelName.textContent = `${servers.find(server => server.id === currentServerId).name} - ${channel.name}`;
    currentChannelId = channel.id;

    const imageModal = document.getElementById('imageModal');
    const modalImage = document.getElementById('modalImage');
    const closeModal = document.getElementById('closeModal');

    // Fechar modal
    closeModal.addEventListener('click', () => {
        imageModal.classList.remove('active');
    });

    channel.messages.forEach(message => {
        const messageItem = document.createElement('li');
        messageItem.classList.add('message');

        const avatarElement = document.createElement('div');
        avatarElement.classList.add('message-avatar');
        const avatarImg = document.createElement('img');

        const contentElement = document.createElement('div');
        contentElement.classList.add('message-content');
        const authorElement = document.createElement('div');
        authorElement.classList.add('message-author');
        authorElement.textContent = message.author;

        const textElement = document.createElement('div');
        textElement.classList.add('message-text');

        if (message.text.includes('http://') || message.text.includes('https://')) {
            const parts = message.text.split(/\s+/); 
            parts.forEach(part => {
                if (part.startsWith('http://') || part.startsWith('https://')) {
                    const link = document.createElement('a');
                    link.href = part;
                    link.textContent = part;
                    link.target = '_blank'; 
                    link.style.color = 'white';
                    textElement.appendChild(link);
                } else {
                    const span = document.createElement('span');
                    span.textContent = part + ' ';
                    textElement.appendChild(span);
                }
            });
        } 
        else if (currentServerId === 1 && channel.id === 4 && message.text.startsWith('img:')) {
            const imgSrc = message.text.replace('img:', '').trim();
            const imgElement = document.createElement('img');
            imgElement.src = imgSrc;
            imgElement.alt = 'Imagem do usu√°rio';
            imgElement.style.maxWidth = '100%';

            imgElement.addEventListener('click', () => {
                modalImage.src = imgSrc;
                imageModal.classList.add('active');
            });
            

            textElement.appendChild(imgElement);
        }
        else if (currentServerId === 3 && channel.id === 2 && message.text.startsWith('img:')) {
          const imgSrc = message.text.replace('img:', '').trim();
          const imgElement = document.createElement('img');
          imgElement.src = imgSrc;
          imgElement.alt = 'Imagem do usu√°rio';
          imgElement.style.maxWidth = '100%';
        
          imgElement.addEventListener('click', () => {
              modalImage.src = imgSrc;
              imageModal.classList.add('active');
          });
        
          textElement.appendChild(imgElement);
        }
         else {
            textElement.textContent = message.text; 
        }

        contentElement.appendChild(authorElement);
        contentElement.appendChild(textElement);

        messageItem.appendChild(avatarElement);
        messageItem.appendChild(contentElement);
        messageList.appendChild(messageItem);
    });
}

  
  
  function navigateToServer(serverId) {
    currentServerId = serverId;
    loadChannels();
    displayMessages(servers.find(server => server.id === currentServerId).channels[0]);
  }
  
  document.querySelectorAll('.server-icon').forEach(icon => {
    icon.addEventListener('click', () => {
      const serverId = icon.dataset.serverId;
      navigateToServer(parseInt(serverId));
      userMenuElement.classList.toggle('hidden');
    });
  });
  
  document.getElementById('sendButton').addEventListener('click', function() {
    const messageInput = document.getElementById('messageInput');
    const message = messageInput.value.trim();
    if (message) {
      const currentServer = servers.find(server => server.id === currentServerId);
      const currentChannel = currentServer.channels.find(channel => channel.id === currentChannelId);
      const newMessage = {
        author: 'You',
        text: message
      };
      currentChannel.messages.push(newMessage);
      displayMessages(currentChannel);
      messageInput.value = '';
      const chatArea = document.getElementById('chat-area');
      chatArea.scrollTop = chatArea.scrollHeight;
    }
  });
  
  document.getElementById('messageInput').addEventListener('keypress', function(event) {
    if (event.key === 'Enter') {
      document.getElementById('sendButton').click();
    }
  });
  
  const userMenuElement = document.getElementById('user-menu');
  const userAvatars = document.querySelectorAll('.user-avatar');
  
  userAvatars.forEach(avatar => {
    avatar.addEventListener('click', () => {
        userMenuSidebar.classList.toggle('hidden');
    });
  });
  
  const channelItems = document.querySelectorAll('.channel-item');
  channelItems.forEach(item => {
    item.addEventListener('click', () => {
        const channelName = item.dataset.channelName;
        const selectedChannel = channels.find(channel => channel.name === channelName);
        displayMessages(selectedChannel);
    });
  });
  
  loadChannels();
